<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/qiniu/nodejs-sdk"

    >qiniu (v6.1.13)</a>
</h1>
<h4>Node wrapper for Qiniu Resource (Cloud) Storage API</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu">module qiniu</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.Exif">
            function <span class="apidocSignatureSpan">qiniu.</span>fop.Exif
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageInfo">
            function <span class="apidocSignatureSpan">qiniu.</span>fop.ImageInfo
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageView">
            function <span class="apidocSignatureSpan">qiniu.</span>fop.ImageView
            <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.Client
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPath">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPath
            <span class="apidocSignatureSpan">(bucket, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPathPair">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPathPair
            <span class="apidocSignatureSpan">(src, dest)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.GetPolicy">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.GetPolicy
            <span class="apidocSignatureSpan">(expires)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy
            <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy2">
            function <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy2
            <span class="apidocSignatureSpan">(putPolicyObj)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>conf</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>digest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>fop</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>fop.Exif.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>fop.ImageInfo.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>fop.ImageView.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>io</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rpc</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.Client.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPath.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPathPair.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.GetPolicy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy2.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>rsf</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">qiniu.</span>zone</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.digest">module qiniu.digest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.digest.Mac">
            function <span class="apidocSignatureSpan">qiniu.digest.</span>Mac
            <span class="apidocSignatureSpan">(accessKey, secretKey)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop">module qiniu.fop</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.Exif">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>Exif
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageInfo">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageInfo
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageView">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageView
            <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.pfop">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>pfop
            <span class="apidocSignatureSpan">(bucket, key, fops, opts, onret)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.Exif">module qiniu.fop.Exif</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.Exif.Exif">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>Exif
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.Exif.prototype">module qiniu.fop.Exif.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.Exif.prototype.makeRequest">
            function <span class="apidocSignatureSpan">qiniu.fop.Exif.prototype.</span>makeRequest
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.ImageInfo">module qiniu.fop.ImageInfo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageInfo.ImageInfo">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageInfo
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.ImageInfo.prototype">module qiniu.fop.ImageInfo.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageInfo.prototype.makeRequest">
            function <span class="apidocSignatureSpan">qiniu.fop.ImageInfo.prototype.</span>makeRequest
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.ImageView">module qiniu.fop.ImageView</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageView.ImageView">
            function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageView
            <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.fop.ImageView.prototype">module qiniu.fop.ImageView.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.fop.ImageView.prototype.makeRequest">
            function <span class="apidocSignatureSpan">qiniu.fop.ImageView.prototype.</span>makeRequest
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.io">module qiniu.io</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.PutExtra">
            function <span class="apidocSignatureSpan">qiniu.io.</span>PutExtra
            <span class="apidocSignatureSpan">(params, mimeType, crc32, checkCrc)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.PutRet">
            function <span class="apidocSignatureSpan">qiniu.io.</span>PutRet
            <span class="apidocSignatureSpan">(hash, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.put">
            function <span class="apidocSignatureSpan">qiniu.io.</span>put
            <span class="apidocSignatureSpan">(uptoken, key, body, extra, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.putFile">
            function <span class="apidocSignatureSpan">qiniu.io.</span>putFile
            <span class="apidocSignatureSpan">(uptoken, key, loadFile, extra, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.putFileWithoutKey">
            function <span class="apidocSignatureSpan">qiniu.io.</span>putFileWithoutKey
            <span class="apidocSignatureSpan">(uptoken, loadFile, extra, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.putReadable">
            function <span class="apidocSignatureSpan">qiniu.io.</span>putReadable
            <span class="apidocSignatureSpan">(uptoken, key, rs, extra, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.io.putWithoutKey">
            function <span class="apidocSignatureSpan">qiniu.io.</span>putWithoutKey
            <span class="apidocSignatureSpan">(uptoken, body, extra, onret)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">qiniu.io.</span>UNDEFINED_KEY</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rpc">module qiniu.rpc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rpc.postMultipart">
            function <span class="apidocSignatureSpan">qiniu.rpc.</span>postMultipart
            <span class="apidocSignatureSpan">(uri, form, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rpc.postWithForm">
            function <span class="apidocSignatureSpan">qiniu.rpc.</span>postWithForm
            <span class="apidocSignatureSpan">(uri, form, token, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rpc.postWithoutForm">
            function <span class="apidocSignatureSpan">qiniu.rpc.</span>postWithoutForm
            <span class="apidocSignatureSpan">(uri, token, onret)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs">module qiniu.rs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.BatchItemRet">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>BatchItemRet
            <span class="apidocSignatureSpan">(error, code)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.BatchStatItemRet">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>BatchStatItemRet
            <span class="apidocSignatureSpan">(data, error, code)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>Client
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Entry">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>Entry
            <span class="apidocSignatureSpan">(hash, fsize, putTime, mimeType, endUser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPath">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPath
            <span class="apidocSignatureSpan">(bucket, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPathPair">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPathPair
            <span class="apidocSignatureSpan">(src, dest)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.GetPolicy">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>GetPolicy
            <span class="apidocSignatureSpan">(expires)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy
            <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy2">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy2
            <span class="apidocSignatureSpan">(putPolicyObj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.makeBaseUrl">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>makeBaseUrl
            <span class="apidocSignatureSpan">(domain, key, query)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.Client">module qiniu.rs.Client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.Client">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>Client
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.Client.prototype">module qiniu.rs.Client.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.batchCopy">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchCopy
            <span class="apidocSignatureSpan">(entries, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.batchDelete">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchDelete
            <span class="apidocSignatureSpan">(entries, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.batchMove">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchMove
            <span class="apidocSignatureSpan">(entries, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.batchStat">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchStat
            <span class="apidocSignatureSpan">(entries, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.copy">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>copy
            <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.fetch">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>fetch
            <span class="apidocSignatureSpan">(url, bucket, key, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.forceBatchCopy">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceBatchCopy
            <span class="apidocSignatureSpan">(entries, force, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.forceBatchMove">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceBatchMove
            <span class="apidocSignatureSpan">(entries, force, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.forceCopy">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceCopy
            <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, force, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.forceMove">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceMove
            <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, force, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.move">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>move
            <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.remove">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>remove
            <span class="apidocSignatureSpan">(bucket, key, onret)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.Client.prototype.stat">
            function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>stat
            <span class="apidocSignatureSpan">(bucket, key, onret)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.EntryPath">module qiniu.rs.EntryPath</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPath.EntryPath">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPath
            <span class="apidocSignatureSpan">(bucket, key)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.EntryPath.prototype">module qiniu.rs.EntryPath.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPath.prototype.encode">
            function <span class="apidocSignatureSpan">qiniu.rs.EntryPath.prototype.</span>encode
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPath.prototype.toStr">
            function <span class="apidocSignatureSpan">qiniu.rs.EntryPath.prototype.</span>toStr
            <span class="apidocSignatureSpan">(op)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.EntryPathPair">module qiniu.rs.EntryPathPair</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPathPair.EntryPathPair">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPathPair
            <span class="apidocSignatureSpan">(src, dest)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.EntryPathPair.prototype">module qiniu.rs.EntryPathPair.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.EntryPathPair.prototype.toStr">
            function <span class="apidocSignatureSpan">qiniu.rs.EntryPathPair.prototype.</span>toStr
            <span class="apidocSignatureSpan">(op, force)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.GetPolicy">module qiniu.rs.GetPolicy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.GetPolicy.GetPolicy">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>GetPolicy
            <span class="apidocSignatureSpan">(expires)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.GetPolicy.prototype">module qiniu.rs.GetPolicy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.GetPolicy.prototype.makeRequest">
            function <span class="apidocSignatureSpan">qiniu.rs.GetPolicy.prototype.</span>makeRequest
            <span class="apidocSignatureSpan">(baseUrl, mac)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.PutPolicy">module qiniu.rs.PutPolicy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy.PutPolicy">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy
            <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.PutPolicy.prototype">module qiniu.rs.PutPolicy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy.prototype.getFlags">
            function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy.prototype.</span>getFlags
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy.prototype.token">
            function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy.prototype.</span>token
            <span class="apidocSignatureSpan">(mac)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.PutPolicy2">module qiniu.rs.PutPolicy2</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy2.PutPolicy2">
            function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy2
            <span class="apidocSignatureSpan">(putPolicyObj)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rs.PutPolicy2.prototype">module qiniu.rs.PutPolicy2.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy2.prototype.getFlags">
            function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy2.prototype.</span>getFlags
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rs.PutPolicy2.prototype.token">
            function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy2.prototype.</span>token
            <span class="apidocSignatureSpan">(mac)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.rsf">module qiniu.rsf</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.rsf.listPrefix">
            function <span class="apidocSignatureSpan">qiniu.rsf.</span>listPrefix
            <span class="apidocSignatureSpan">(bucket, prefix, marker, limit, delimiter, onret)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.util">module qiniu.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.util.base64ToUrlSafe">
            function <span class="apidocSignatureSpan">qiniu.util.</span>base64ToUrlSafe
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.util.generateAccessToken">
            function <span class="apidocSignatureSpan">qiniu.util.</span>generateAccessToken
            <span class="apidocSignatureSpan">(uri, body)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.util.hmacSha1">
            function <span class="apidocSignatureSpan">qiniu.util.</span>hmacSha1
            <span class="apidocSignatureSpan">(encodedFlags, secretKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.util.isQiniuCallback">
            function <span class="apidocSignatureSpan">qiniu.util.</span>isQiniuCallback
            <span class="apidocSignatureSpan">(path, body, callbackAuth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.util.urlsafeBase64Encode">
            function <span class="apidocSignatureSpan">qiniu.util.</span>urlsafeBase64Encode
            <span class="apidocSignatureSpan">(jsonFlags)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.qiniu.zone">module qiniu.zone</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.qiniu.zone.up_host">
            function <span class="apidocSignatureSpan">qiniu.zone.</span>up_host
            <span class="apidocSignatureSpan">(uptoken, conf)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu" id="apidoc.module.qiniu">module qiniu</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.Exif" id="apidoc.element.qiniu.fop.Exif">
        function <span class="apidocSignatureSpan">qiniu.</span>fop.Exif
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Exif() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageInfo" id="apidoc.element.qiniu.fop.ImageInfo">
        function <span class="apidocSignatureSpan">qiniu.</span>fop.ImageInfo
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageInfo() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageView" id="apidoc.element.qiniu.fop.ImageView">
        function <span class="apidocSignatureSpan">qiniu.</span>fop.ImageView
        <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageView(mode, width, height, quality, format) {
  this.mode = mode || 1;
  this.width = width || 0;
  this.height = height || 0;
  this.quality = quality || 0;
  this.format = format || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client" id="apidoc.element.qiniu.rs.Client">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.Client
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(client) {
  this.client = client || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

var EntryPath = qiniu.rs.EntryPath;
var EntryPathPair = qiniu.rs.EntryPathPair;

//bucket 空间名
//key 文件名
var client = new qiniu.<span class="apidocCodeKeywordSpan">rs.Client</span>();
client.stat(bucket, key,function(err, ret){
if (!err) {
     // 上传成功， 处理返回值
     console.log(ret.hash);
     console.log(ret);
     //ret.should.have.keys(&#x27;hash&#x27;, &#x27;fsize&#x27;, &#x27;putTime&#x27;, &#x27;mimeType&#x27;);
     // ret.key &#x26; ret.hash
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPath" id="apidoc.element.qiniu.rs.EntryPath">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPath
        <span class="apidocSignatureSpan">(bucket, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPath(bucket, key) {
  this.bucket = bucket || null;
  this.key = key || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPathPair" id="apidoc.element.qiniu.rs.EntryPathPair">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.EntryPathPair
        <span class="apidocSignatureSpan">(src, dest)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPathPair(src, dest) {
  this.src = src || null;
  this.dest = dest || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.GetPolicy" id="apidoc.element.qiniu.rs.GetPolicy">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.GetPolicy
        <span class="apidocSignatureSpan">(expires)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GetPolicy(expires) {
  this.expires = expires || 3600;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy" id="apidoc.element.qiniu.rs.PutPolicy">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy
        <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl ) {
  this.scope = scope || null;
  this.callbackUrl = callbackUrl || null;
  this.callbackBody = callbackBody || null;
  this.returnUrl = returnUrl || null;
  this.returnBody = returnBody || null;
  this.endUser = endUser || null;
  this.expires = expires || 3600;
  this.persistentOps = persistentOps || null;
  this.persistentNotifyUrl = persistentNotifyUrl || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy2" id="apidoc.element.qiniu.rs.PutPolicy2">
        function <span class="apidocSignatureSpan">qiniu.</span>rs.PutPolicy2
        <span class="apidocSignatureSpan">(putPolicyObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy2(putPolicyObj) {

  if (typeof putPolicyObj !== &#x27;object&#x27;) {
    return false;
  }

  this.scope = putPolicyObj.scope || null;
  this.expires = putPolicyObj.expires || 3600;
  this.insertOnly = putPolicyObj.insertOnly || null;

  this.saveKey = putPolicyObj.saveKey || null;
  this.endUser = putPolicyObj.endUser || null;

  this.returnUrl = putPolicyObj.returnUrl || null;
  this.returnBody = putPolicyObj.returnBody || null;

  this.callbackUrl = putPolicyObj.callbackUrl || null;
  this.callbackHost = putPolicyObj.callbackHost || null;
  this.callbackBody = putPolicyObj.callbackBody || null;
  this.callbackBodyType = putPolicyObj.callbackBodyType || null;
  this.callbackFetchKey = putPolicyObj.callbackFetchKey || null;

  this.persistentOps = putPolicyObj.persistentOps || null;
  this.persistentNotifyUrl = putPolicyObj.persistentNotifyUrl || null;
  this.persistentPipeline = putPolicyObj.persistentPipeline || null;

  this.fsizeLimit = putPolicyObj.fsizeLimit || null;

  this.fsizeMin = putPolicyObj.fsizeMin || null;

  this.detectMime = putPolicyObj.detectMime || null;

  this.mimeLimit = putPolicyObj.mimeLimit || null;

  this.deleteAfterDays = putPolicyObj.deleteAfterDays || null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// 初始化ak,sk
qiniu.conf.ACCESS_KEY = &#x27;ACCESS_KEY&#x27;;
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

//上传策略 http://developer.qiniu.com/article/developer/security/put-policy.html
// bucket:key 空间名:文件名
var putPolicy = new qiniu.<span class="apidocCodeKeywordSpan">rs.PutPolicy2</span>(new policy(&#x27;bucket:key&#x27;));

var token = putPolicy.token();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
...</pre></li>
    </ul>








































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.digest" id="apidoc.module.qiniu.digest">module qiniu.digest</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.digest.Mac" id="apidoc.element.qiniu.digest.Mac">
        function <span class="apidocSignatureSpan">qiniu.digest.</span>Mac
        <span class="apidocSignatureSpan">(accessKey, secretKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mac(accessKey, secretKey) {
  this.accessKey = accessKey || conf.ACCESS_KEY;
  this.secretKey = secretKey || conf.SECRET_KEY;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop" id="apidoc.module.qiniu.fop">module qiniu.fop</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.Exif" id="apidoc.element.qiniu.fop.Exif">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>Exif
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Exif() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageInfo" id="apidoc.element.qiniu.fop.ImageInfo">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageInfo
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageInfo() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageView" id="apidoc.element.qiniu.fop.ImageView">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageView
        <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageView(mode, width, height, quality, format) {
  this.mode = mode || 1;
  this.width = width || 0;
  this.height = height || 0;
  this.quality = quality || 0;
  this.format = format || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.fop.pfop" id="apidoc.element.qiniu.fop.pfop">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>pfop
        <span class="apidocSignatureSpan">(bucket, key, fops, opts, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pfop(bucket, key, fops, opts, onret) {

  opts = opts || {};

  param = {
    bucket: bucket,
    key: key,
    fops: fops
  };
  if (opts.notifyURL) {
    param.notifyURL = opts.notifyURL;
  } else {
    param.notifyURL = &#x27;www.test.com&#x27;;
  }
  if (opts.force) {
    param.force = 1;
  }
  if (opts.pipeline) {
    param.pipeline = opts.pipeline;
  }

  var uri = conf.API_HOST + &#x27;/pfop/&#x27;;
  var body = querystring.stringify(param);
  var auth = util.generateAccessToken(uri, body);
  rpc.postWithForm(uri, body, auth, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//   }
//   if (opts.force) {
//     param.force = 1;
//   }
//   if (opts.pipeline) {
//     param.pipeline = opts.pipeline;
//   }
qiniu.fop.<span class="apidocCodeKeywordSpan">pfop</span>(bucket, key, cmd, opts, function(err, ret, res) {
if (res.statusCode==200) {
    console.log(res);
    //console.log(ret);

} else {
    console.log(err);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.Exif" id="apidoc.module.qiniu.fop.Exif">module qiniu.fop.Exif</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.Exif.Exif" id="apidoc.element.qiniu.fop.Exif.Exif">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>Exif
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Exif() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.Exif.prototype" id="apidoc.module.qiniu.fop.Exif.prototype">module qiniu.fop.Exif.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.Exif.prototype.makeRequest" id="apidoc.element.qiniu.fop.Exif.prototype.makeRequest">
        function <span class="apidocSignatureSpan">qiniu.fop.Exif.prototype.</span>makeRequest
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeRequest = function (url) {
  return url + &#x27;?exif&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.ImageInfo" id="apidoc.module.qiniu.fop.ImageInfo">module qiniu.fop.ImageInfo</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageInfo.ImageInfo" id="apidoc.element.qiniu.fop.ImageInfo.ImageInfo">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageInfo
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageInfo() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.ImageInfo.prototype" id="apidoc.module.qiniu.fop.ImageInfo.prototype">module qiniu.fop.ImageInfo.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageInfo.prototype.makeRequest" id="apidoc.element.qiniu.fop.ImageInfo.prototype.makeRequest">
        function <span class="apidocSignatureSpan">qiniu.fop.ImageInfo.prototype.</span>makeRequest
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeRequest = function (url) {
  return url + &#x27;?imageInfo&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.ImageView" id="apidoc.module.qiniu.fop.ImageView">module qiniu.fop.ImageView</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageView.ImageView" id="apidoc.element.qiniu.fop.ImageView.ImageView">
        function <span class="apidocSignatureSpan">qiniu.fop.</span>ImageView
        <span class="apidocSignatureSpan">(mode, width, height, quality, format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ImageView(mode, width, height, quality, format) {
  this.mode = mode || 1;
  this.width = width || 0;
  this.height = height || 0;
  this.quality = quality || 0;
  this.format = format || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.fop.ImageView.prototype" id="apidoc.module.qiniu.fop.ImageView.prototype">module qiniu.fop.ImageView.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.fop.ImageView.prototype.makeRequest" id="apidoc.element.qiniu.fop.ImageView.prototype.makeRequest">
        function <span class="apidocSignatureSpan">qiniu.fop.ImageView.prototype.</span>makeRequest
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeRequest = function (url) {
  url += &#x27;?imageView2/&#x27; + this.mode;

  if (this.width &#x3e; 0) {
    url += &#x27;/w/&#x27; + this.width;
  }

  if (this.height &#x3e; 0) {
    url += &#x27;/h/&#x27; + this.height;
  }

  if (this.quality &#x3e; 0) {
    url += &#x27;/q/&#x27; + this.quality;
  }

  if (this.format) {
    url += &#x27;/format/&#x27; + this.format;
  }

  return url;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.io" id="apidoc.module.qiniu.io">module qiniu.io</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.io.PutExtra" id="apidoc.element.qiniu.io.PutExtra">
        function <span class="apidocSignatureSpan">qiniu.io.</span>PutExtra
        <span class="apidocSignatureSpan">(params, mimeType, crc32, checkCrc)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutExtra(params, mimeType, crc32, checkCrc) {
  this.params = params || {};
  this.mimeType = mimeType || null;
  this.crc32 = crc32 || null;
  this.checkCrc = checkCrc || 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.PutRet" id="apidoc.element.qiniu.io.PutRet">
        function <span class="apidocSignatureSpan">qiniu.io.</span>PutRet
        <span class="apidocSignatureSpan">(hash, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutRet(hash, key) {
  this.hash = hash || null;
  this.key = key || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.put" id="apidoc.element.qiniu.io.put">
        function <span class="apidocSignatureSpan">qiniu.io.</span>put
        <span class="apidocSignatureSpan">(uptoken, key, body, extra, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function put(uptoken, key, body, extra, onret) {
  var rs = new Readable();
  rs.push(body);
  rs.push(null);

  if (!extra) {
    extra = new PutExtra();
  }
  if (extra.checkCrc == 1) {
    var bodyCrc32 = getCrc32(body);
    extra.crc32 = &#x27;&#x27; + parseInt(bodyCrc32, 16);
  } else if (extra.checkCrc == 2 &#x26;&#x26; extra.crc32) {
    extra.crc32 = &#x27;&#x27; + extra.crc32
  }
  return putReadable(uptoken, key, rs, extra, onret)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.putFile" id="apidoc.element.qiniu.io.putFile">
        function <span class="apidocSignatureSpan">qiniu.io.</span>putFile
        <span class="apidocSignatureSpan">(uptoken, key, loadFile, extra, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putFile(uptoken, key, loadFile, extra, onret) {

  var rs = fs.createReadStream(loadFile);

  if (!extra) {
    extra = new PutExtra();
  }
  if (extra.checkCrc == 1) {
    var fileCrc32 = getCrc32(fs.readFileSync(loadFile));
    extra.crc32 = &#x27;&#x27; + parseInt(fileCrc32, 16);
  } else if (extra.checkCrc == 2 &#x26;&#x26; extra.crc32) {
    extra.crc32 = &#x27;&#x27; + extra.crc32
  }
  if (!extra.mimeType) {
    extra.mimeType = mime.lookup(loadFile);
  }

  return putReadable(uptoken, key, rs, extra, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var token = putPolicy.token();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
qiniu.io.<span class="apidocCodeKeywordSpan">putFile</span>(token,key,filePath ,null,function(err, ret) {
if (!err) {
  // 上传成功， 处理返回值
  console.log(ret.key, ret.hash, ret.returnBody);
  // ret.key &#x26; ret.hash
} else {
  // 上传失败， 处理返回代码
  console.log(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.putFileWithoutKey" id="apidoc.element.qiniu.io.putFileWithoutKey">
        function <span class="apidocSignatureSpan">qiniu.io.</span>putFileWithoutKey
        <span class="apidocSignatureSpan">(uptoken, loadFile, extra, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putFileWithoutKey(uptoken, loadFile, extra, onret) {
  return putFile(uptoken, null, loadFile, extra, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.putReadable" id="apidoc.element.qiniu.io.putReadable">
        function <span class="apidocSignatureSpan">qiniu.io.</span>putReadable
        <span class="apidocSignatureSpan">(uptoken, key, rs, extra, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putReadable(uptoken, key, rs, extra, onret) {
  if (!extra) {
    extra = new PutExtra();
  }
  if (!extra.mimeType) {
    extra.mimeType = &#x27;application/octet-stream&#x27;;
  }

  if (!key) {
    key = exports.UNDEFINED_KEY;
  }

  rs.on(&#x22;error&#x22;, function (err) {
      onret({code: -1, error: err.toString()}, {});
  });

  var form = getMultipart(uptoken, key, rs, extra);
  // 设置上传域名
  zone.up_host(uptoken, conf);

  return rpc.postMultipart(conf.UP_HOST, form, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.io.putWithoutKey" id="apidoc.element.qiniu.io.putWithoutKey">
        function <span class="apidocSignatureSpan">qiniu.io.</span>putWithoutKey
        <span class="apidocSignatureSpan">(uptoken, body, extra, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putWithoutKey(uptoken, body, extra, onret) {
  return put(uptoken, null, body, extra, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rpc" id="apidoc.module.qiniu.rpc">module qiniu.rpc</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rpc.postMultipart" id="apidoc.element.qiniu.rpc.postMultipart">
        function <span class="apidocSignatureSpan">qiniu.rpc.</span>postMultipart
        <span class="apidocSignatureSpan">(uri, form, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function postMultipart(uri, form, onret) {
  return post(uri, form, form.headers(), onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    onret({code: -1, error: err.toString()}, {});
});

var form = getMultipart(uptoken, key, rs, extra);
// 设置上传域名
zone.up_host(uptoken, conf);

return rpc.<span class="apidocCodeKeywordSpan">postMultipart</span>(conf.UP_HOST, form, onret);
}


function put(uptoken, key, body, extra, onret) {
var rs = new Readable();
rs.push(body);
rs.push(null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rpc.postWithForm" id="apidoc.element.qiniu.rpc.postWithForm">
        function <span class="apidocSignatureSpan">qiniu.rpc.</span>postWithForm
        <span class="apidocSignatureSpan">(uri, form, token, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function postWithForm(uri, form, token, onret) {
  var headers = {
    &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;
  };
  if (token) {
    headers[&#x27;Authorization&#x27;] = token;
  }
  return post(uri, form, headers, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (opts.pipeline) {
    param.pipeline = opts.pipeline;
  }

  var uri = conf.API_HOST + &#x27;/pfop/&#x27;;
  var body = querystring.stringify(param);
  var auth = util.generateAccessToken(uri, body);
  rpc.<span class="apidocCodeKeywordSpan">postWithForm</span>(uri, body, auth, onret);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rpc.postWithoutForm" id="apidoc.element.qiniu.rpc.postWithoutForm">
        function <span class="apidocSignatureSpan">qiniu.rpc.</span>postWithoutForm
        <span class="apidocSignatureSpan">(uri, token, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function postWithoutForm(uri, token, onret) {
  var headers = {
    &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;,
  };
  if (token) {
    headers[&#x27;Authorization&#x27;] = token;
  }
  return post(uri, null, headers, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var conf = require(&#x27;./conf&#x27;);
var util = require(&#x27;./util&#x27;);

exports.listPrefix = function(bucket, prefix, marker, limit, delimiter, onret) {
var uri = getPrefixUri(bucket, prefix, marker, limit, delimiter);
var digest = util.generateAccessToken(uri, null);

rpc.<span class="apidocCodeKeywordSpan">postWithoutForm</span>(uri, digest, onret)
}

function getPrefixUri(bucket, prefix, marker, limit, delimiter) {
var uri = conf.RSF_HOST + &#x27;/&#x27; + &#x27;list?&#x27; + &#x27;bucket=&#x27; + bucket;
if (marker) {
  uri += &#x27;&#x26;&#x27; + &#x27;marker=&#x27; + marker;
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs" id="apidoc.module.qiniu.rs">module qiniu.rs</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.BatchItemRet" id="apidoc.element.qiniu.rs.BatchItemRet">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>BatchItemRet
        <span class="apidocSignatureSpan">(error, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BatchItemRet(error, code) {
  this.error = error || null;
  this.code = code || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.BatchStatItemRet" id="apidoc.element.qiniu.rs.BatchStatItemRet">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>BatchStatItemRet
        <span class="apidocSignatureSpan">(data, error, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BatchStatItemRet(data, error, code) {
  this.data = data;
  this.error = error;
  this.code = code;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client" id="apidoc.element.qiniu.rs.Client">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>Client
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(client) {
  this.client = client || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

var EntryPath = qiniu.rs.EntryPath;
var EntryPathPair = qiniu.rs.EntryPathPair;

//bucket 空间名
//key 文件名
var client = new qiniu.rs.<span class="apidocCodeKeywordSpan">Client</span>();
client.stat(bucket, key,function(err, ret){
if (!err) {
     // 上传成功， 处理返回值
     console.log(ret.hash);
     console.log(ret);
     //ret.should.have.keys(&#x27;hash&#x27;, &#x27;fsize&#x27;, &#x27;putTime&#x27;, &#x27;mimeType&#x27;);
     // ret.key &#x26; ret.hash
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Entry" id="apidoc.element.qiniu.rs.Entry">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>Entry
        <span class="apidocSignatureSpan">(hash, fsize, putTime, mimeType, endUser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Entry(hash, fsize, putTime, mimeType, endUser) {
  this.hash = hash || null;
  this.fsize = fsize || null;
  this.putTime = putTime || null;
  this.mimeType = mimeType || null;
  this.endUser = endUser || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPath" id="apidoc.element.qiniu.rs.EntryPath">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPath
        <span class="apidocSignatureSpan">(bucket, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPath(bucket, key) {
  this.bucket = bucket || null;
  this.key = key || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPathPair" id="apidoc.element.qiniu.rs.EntryPathPair">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPathPair
        <span class="apidocSignatureSpan">(src, dest)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPathPair(src, dest) {
  this.src = src || null;
  this.dest = dest || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.GetPolicy" id="apidoc.element.qiniu.rs.GetPolicy">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>GetPolicy
        <span class="apidocSignatureSpan">(expires)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GetPolicy(expires) {
  this.expires = expires || 3600;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy" id="apidoc.element.qiniu.rs.PutPolicy">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy
        <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl ) {
  this.scope = scope || null;
  this.callbackUrl = callbackUrl || null;
  this.callbackBody = callbackBody || null;
  this.returnUrl = returnUrl || null;
  this.returnBody = returnBody || null;
  this.endUser = endUser || null;
  this.expires = expires || 3600;
  this.persistentOps = persistentOps || null;
  this.persistentNotifyUrl = persistentNotifyUrl || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy2" id="apidoc.element.qiniu.rs.PutPolicy2">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy2
        <span class="apidocSignatureSpan">(putPolicyObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy2(putPolicyObj) {

  if (typeof putPolicyObj !== &#x27;object&#x27;) {
    return false;
  }

  this.scope = putPolicyObj.scope || null;
  this.expires = putPolicyObj.expires || 3600;
  this.insertOnly = putPolicyObj.insertOnly || null;

  this.saveKey = putPolicyObj.saveKey || null;
  this.endUser = putPolicyObj.endUser || null;

  this.returnUrl = putPolicyObj.returnUrl || null;
  this.returnBody = putPolicyObj.returnBody || null;

  this.callbackUrl = putPolicyObj.callbackUrl || null;
  this.callbackHost = putPolicyObj.callbackHost || null;
  this.callbackBody = putPolicyObj.callbackBody || null;
  this.callbackBodyType = putPolicyObj.callbackBodyType || null;
  this.callbackFetchKey = putPolicyObj.callbackFetchKey || null;

  this.persistentOps = putPolicyObj.persistentOps || null;
  this.persistentNotifyUrl = putPolicyObj.persistentNotifyUrl || null;
  this.persistentPipeline = putPolicyObj.persistentPipeline || null;

  this.fsizeLimit = putPolicyObj.fsizeLimit || null;

  this.fsizeMin = putPolicyObj.fsizeMin || null;

  this.detectMime = putPolicyObj.detectMime || null;

  this.mimeLimit = putPolicyObj.mimeLimit || null;

  this.deleteAfterDays = putPolicyObj.deleteAfterDays || null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// 初始化ak,sk
qiniu.conf.ACCESS_KEY = &#x27;ACCESS_KEY&#x27;;
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

//上传策略 http://developer.qiniu.com/article/developer/security/put-policy.html
// bucket:key 空间名:文件名
var putPolicy = new qiniu.rs.<span class="apidocCodeKeywordSpan">PutPolicy2</span>(new policy(&#x27;bucket:key&#x27;));

var token = putPolicy.token();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.makeBaseUrl" id="apidoc.element.qiniu.rs.makeBaseUrl">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>makeBaseUrl
        <span class="apidocSignatureSpan">(domain, key, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeBaseUrl(domain, key, query) {
  key = new Buffer(key);
  return (/^https?:\/\//.test(domain) ? domain : &#x27;http://&#x27; + domain) + &#x27;/&#x27; + querystring.escape(key) + (query || &#x27;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.Client" id="apidoc.module.qiniu.rs.Client">module qiniu.rs.Client</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.Client" id="apidoc.element.qiniu.rs.Client.Client">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>Client
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(client) {
  this.client = client || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

var EntryPath = qiniu.rs.EntryPath;
var EntryPathPair = qiniu.rs.EntryPathPair;

//bucket 空间名
//key 文件名
var client = new qiniu.rs.<span class="apidocCodeKeywordSpan">Client</span>();
client.stat(bucket, key,function(err, ret){
if (!err) {
     // 上传成功， 处理返回值
     console.log(ret.hash);
     console.log(ret);
     //ret.should.have.keys(&#x27;hash&#x27;, &#x27;fsize&#x27;, &#x27;putTime&#x27;, &#x27;mimeType&#x27;);
     // ret.key &#x26; ret.hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.Client.prototype" id="apidoc.module.qiniu.rs.Client.prototype">module qiniu.rs.Client.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.batchCopy" id="apidoc.element.qiniu.rs.Client.prototype.batchCopy">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchCopy
        <span class="apidocSignatureSpan">(entries, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">batchCopy = function (entries, onret) {
  fileHandle(&#x27;copy&#x27;, entries, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.batchDelete" id="apidoc.element.qiniu.rs.Client.prototype.batchDelete">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchDelete
        <span class="apidocSignatureSpan">(entries, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">batchDelete = function (entries, onret) {
  fileHandle(&#x27;delete&#x27;, entries, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.batchMove" id="apidoc.element.qiniu.rs.Client.prototype.batchMove">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchMove
        <span class="apidocSignatureSpan">(entries, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">batchMove = function (entries, onret) {
  fileHandle(&#x27;move&#x27;, entries, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.batchStat" id="apidoc.element.qiniu.rs.Client.prototype.batchStat">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>batchStat
        <span class="apidocSignatureSpan">(entries, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">batchStat = function (entries, onret) {
  fileHandle(&#x27;stat&#x27;, entries, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.copy" id="apidoc.element.qiniu.rs.Client.prototype.copy">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>copy
        <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copy = function (bucketSrc, keySrc, bucketDest, keyDest, onret) {
  var encodedEntryURISrc = getEncodedEntryUri(bucketSrc, keySrc);
  var encodedEntryURIDest = getEncodedEntryUri(bucketDest, keyDest);
  var uri = conf.RS_HOST + &#x27;/copy/&#x27; + encodedEntryURISrc + &#x27;/&#x27; + encodedEntryURIDest;

  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.fetch" id="apidoc.element.qiniu.rs.Client.prototype.fetch">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>fetch
        <span class="apidocSignatureSpan">(url, bucket, key, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetch = function (url, bucket, key, onret) {
  var bucketUri = getEncodedEntryUri(bucket, key);
  var fetchUrl = util.urlsafeBase64Encode(url);
  var uri = &#x27;http://iovip.qbox.me/fetch/&#x27; + fetchUrl + &#x27;/to/&#x27; + bucketUri;
  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.forceBatchCopy" id="apidoc.element.qiniu.rs.Client.prototype.forceBatchCopy">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceBatchCopy
        <span class="apidocSignatureSpan">(entries, force, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceBatchCopy = function (entries, force, onret) {

  fileHandleForce(&#x27;copy&#x27;, entries, force, onret);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.forceBatchMove" id="apidoc.element.qiniu.rs.Client.prototype.forceBatchMove">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceBatchMove
        <span class="apidocSignatureSpan">(entries, force, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceBatchMove = function (entries, force, onret) {

  fileHandleForce(&#x27;move&#x27;, entries, force, onret);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// });


// var client = new qiniu.rs.Client();
// var entries = [];
// entries.push(new EntryPathPair(new EntryPath(&#x27;test01&#x27;, &#x27;5s.jpeg&#x27;), new EntryPath(&#x27;public&#x27;, &#x27
;010&#x27;)));
//  entries.push(new EntryPathPair(new EntryPath(&#x27;test01&#x27;, &#x27;5s.jpg&#x27;), new EntryPath(&#x27;public&#x27;, &#x27
;020&#x27;)));
// client.<span class="apidocCodeKeywordSpan">forceBatchMove</span>(entries, 1, function(err, ret) {
//   if(!err){
//     console.log(ret);
//   }else{
//     console.log(err);
//   }
// });
// bucket, prefix, marker, limit, delimiter, onret
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.forceCopy" id="apidoc.element.qiniu.rs.Client.prototype.forceCopy">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceCopy
        <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, force, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceCopy = function (bucketSrc, keySrc, bucketDest, keyDest, force, onret) {

    var encodedEntryURISrc = getEncodedEntryUri(bucketSrc, keySrc);
    var encodedEntryURIDest = getEncodedEntryUri(bucketDest, keyDest);
    var uri = conf.RS_HOST + &#x27;/copy/&#x27; + encodedEntryURISrc + &#x27;/&#x27; + encodedEntryURIDest +&#x27;/force/&#x27;+force;

    var digest = util.generateAccessToken(uri, null);
    rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//   }else{
//     console.log(err);
//   }
// });


// var client = new qiniu.rs.Client();
// client.<span class="apidocCodeKeywordSpan">forceCopy</span>(&#x27;public&#x27;,&#x27;2.flv&#x27;,&#x27;logs&#x27;,&#x27;Go并发编程实战.
rar&#x27;, 1,function(err, ret){
//   if(!err){
//     console.log(ret);
//   }else{
//     console.log(err);
//   }
// });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.forceMove" id="apidoc.element.qiniu.rs.Client.prototype.forceMove">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>forceMove
        <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, force, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceMove = function (bucketSrc, keySrc, bucketDest, keyDest, force, onret) {

  var encodedEntryURISrc = getEncodedEntryUri(bucketSrc, keySrc);
  var encodedEntryURIDest = getEncodedEntryUri(bucketDest, keyDest);
  var uri = conf.RS_HOST + &#x27;/move/&#x27; + encodedEntryURISrc + &#x27;/&#x27; + encodedEntryURIDest +&#x27;/force/&#x27;+force;

  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.move" id="apidoc.element.qiniu.rs.Client.prototype.move">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>move
        <span class="apidocSignatureSpan">(bucketSrc, keySrc, bucketDest, keyDest, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">move = function (bucketSrc, keySrc, bucketDest, keyDest, onret) {
  var encodedEntryURISrc = getEncodedEntryUri(bucketSrc, keySrc);
  var encodedEntryURIDest = getEncodedEntryUri(bucketDest, keyDest);
  var uri = conf.RS_HOST + &#x27;/move/&#x27; + encodedEntryURISrc + &#x27;/&#x27; + encodedEntryURIDest;
  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      console.log(err)
      // http://developer.qiniu.com/docs/v6/api/reference/codes.html
    }
});


// var client = new qiniu.rs.Client();
// client.<span class="apidocCodeKeywordSpan">move</span>(&#x27;public&#x27;,&#x27;145637992222&#x27;,&#x27;logs&#x27;,&#x27;145637992222
&#x27;, 1, function(err, ret){
//   if(!err){
//     console.log(ret);
//   }else{
//     console.log(err);
//   }
// });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.remove" id="apidoc.element.qiniu.rs.Client.prototype.remove">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>remove
        <span class="apidocSignatureSpan">(bucket, key, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (bucket, key, onret) {
<span class="apidocCodeCommentSpan">  /*
   * func (this Client) Delete(bucket, key string) (err error)
   * */
</span>  var encodedEntryUri = getEncodedEntryUri(bucket, key);
  var uri = conf.RS_HOST + &#x27;/delete/&#x27; + encodedEntryUri;
  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.Client.prototype.stat" id="apidoc.element.qiniu.rs.Client.prototype.stat">
        function <span class="apidocSignatureSpan">qiniu.rs.Client.prototype.</span>stat
        <span class="apidocSignatureSpan">(bucket, key, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stat = function (bucket, key, onret) {
  var encodedEntryUri = getEncodedEntryUri(bucket, key);
  var uri = conf.RS_HOST + &#x27;/stat/&#x27; + encodedEntryUri;
  var digest = util.generateAccessToken(uri, null);

  rpc.postWithoutForm(uri, digest, onret);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var EntryPath = qiniu.rs.EntryPath;
var EntryPathPair = qiniu.rs.EntryPathPair;

//bucket 空间名
//key 文件名
var client = new qiniu.rs.Client();
client.<span class="apidocCodeKeywordSpan">stat</span>(bucket, key,function(err, ret){
if (!err) {
     // 上传成功， 处理返回值
     console.log(ret.hash);
     console.log(ret);
     //ret.should.have.keys(&#x27;hash&#x27;, &#x27;fsize&#x27;, &#x27;putTime&#x27;, &#x27;mimeType&#x27;);
     // ret.key &#x26; ret.hash
   } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.EntryPath" id="apidoc.module.qiniu.rs.EntryPath">module qiniu.rs.EntryPath</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPath.EntryPath" id="apidoc.element.qiniu.rs.EntryPath.EntryPath">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPath
        <span class="apidocSignatureSpan">(bucket, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPath(bucket, key) {
  this.bucket = bucket || null;
  this.key = key || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.EntryPath.prototype" id="apidoc.module.qiniu.rs.EntryPath.prototype">module qiniu.rs.EntryPath.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPath.prototype.encode" id="apidoc.element.qiniu.rs.EntryPath.prototype.encode">
        function <span class="apidocSignatureSpan">qiniu.rs.EntryPath.prototype.</span>encode
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encode = function () {
  return getEncodedEntryUri(this.bucket, this.key);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.src = src || null;
  this.dest = dest || null;
}

EntryPathPair.prototype.toStr = function(op, force) {
  if (typeof(force)==&#x27;undefined&#x27;){

    return &#x27;op=/&#x27; + op + &#x27;/&#x27; + this.src.<span class="apidocCodeKeywordSpan">encode</span>() + &#x27;/&#x27; +
this.dest.encode() + &#x27;&#x26;&#x27;;

  }else{

    return &#x27;op=/&#x27; + op + &#x27;/&#x27; + this.src.encode() + &#x27;/&#x27; + this.dest.encode() + &#x27;/force/&#x27; +
force + &#x27;&#x26;&#x27;;
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPath.prototype.toStr" id="apidoc.element.qiniu.rs.EntryPath.prototype.toStr">
        function <span class="apidocSignatureSpan">qiniu.rs.EntryPath.prototype.</span>toStr
        <span class="apidocSignatureSpan">(op)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toStr = function (op) {
  return &#x27;op=/&#x27; + op + &#x27;/&#x27; + getEncodedEntryUri(this.bucket, this.key) + &#x27;&#x26;&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

}


function fileHandle(op, entries, onret) {
  var body = &#x27;&#x27;;
  for (var i in entries) {
    body += entries[i].<span class="apidocCodeKeywordSpan">toStr</span>(op);
  }

  var uri = conf.RS_HOST + &#x27;/batch&#x27;;
  var digest = util.generateAccessToken(uri, body);
  rpc.postWithForm(uri, body, digest, onret);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.EntryPathPair" id="apidoc.module.qiniu.rs.EntryPathPair">module qiniu.rs.EntryPathPair</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPathPair.EntryPathPair" id="apidoc.element.qiniu.rs.EntryPathPair.EntryPathPair">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>EntryPathPair
        <span class="apidocSignatureSpan">(src, dest)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EntryPathPair(src, dest) {
  this.src = src || null;
  this.dest = dest || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.EntryPathPair.prototype" id="apidoc.module.qiniu.rs.EntryPathPair.prototype">module qiniu.rs.EntryPathPair.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.EntryPathPair.prototype.toStr" id="apidoc.element.qiniu.rs.EntryPathPair.prototype.toStr">
        function <span class="apidocSignatureSpan">qiniu.rs.EntryPathPair.prototype.</span>toStr
        <span class="apidocSignatureSpan">(op, force)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toStr = function (op, force) {
  if (typeof(force)==&#x27;undefined&#x27;){

    return &#x27;op=/&#x27; + op + &#x27;/&#x27; + this.src.encode() + &#x27;/&#x27; + this.dest.encode() + &#x27;&#x26;&#x27;;

  }else{

    return &#x27;op=/&#x27; + op + &#x27;/&#x27; + this.src.encode() + &#x27;/&#x27; + this.dest.encode() + &#x27;/force/&#x27; + force + &#x27;&#x26;&#x27;;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

}


function fileHandle(op, entries, onret) {
  var body = &#x27;&#x27;;
  for (var i in entries) {
    body += entries[i].<span class="apidocCodeKeywordSpan">toStr</span>(op);
  }

  var uri = conf.RS_HOST + &#x27;/batch&#x27;;
  var digest = util.generateAccessToken(uri, body);
  rpc.postWithForm(uri, body, digest, onret);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.GetPolicy" id="apidoc.module.qiniu.rs.GetPolicy">module qiniu.rs.GetPolicy</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.GetPolicy.GetPolicy" id="apidoc.element.qiniu.rs.GetPolicy.GetPolicy">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>GetPolicy
        <span class="apidocSignatureSpan">(expires)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GetPolicy(expires) {
  this.expires = expires || 3600;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.GetPolicy.prototype" id="apidoc.module.qiniu.rs.GetPolicy.prototype">module qiniu.rs.GetPolicy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.GetPolicy.prototype.makeRequest" id="apidoc.element.qiniu.rs.GetPolicy.prototype.makeRequest">
        function <span class="apidocSignatureSpan">qiniu.rs.GetPolicy.prototype.</span>makeRequest
        <span class="apidocSignatureSpan">(baseUrl, mac)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeRequest = function (baseUrl, mac) {
  if (!mac) {
    mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
  }

  var deadline = this.expires + Math.floor(Date.now() / 1000);

  if (baseUrl.indexOf(&#x27;?&#x27;) &#x3e;= 0) {
    baseUrl += &#x27;&#x26;e=&#x27;;
  } else {
    baseUrl += &#x27;?e=&#x27;;
  }
  baseUrl += deadline;

  var signature = util.hmacSha1(baseUrl, mac.secretKey);
  var encodedSign = util.base64ToUrlSafe(signature);
  var downloadToken = mac.accessKey + &#x27;:&#x27; + encodedSign;

  return baseUrl + &#x27;&#x26;token=&#x27; + downloadToken;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.PutPolicy" id="apidoc.module.qiniu.rs.PutPolicy">module qiniu.rs.PutPolicy</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy.PutPolicy" id="apidoc.element.qiniu.rs.PutPolicy.PutPolicy">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy
        <span class="apidocSignatureSpan">(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy(scope, callbackUrl, callbackBody, returnUrl, returnBody, endUser, expires, persistentOps, persistentNotifyUrl ) {
  this.scope = scope || null;
  this.callbackUrl = callbackUrl || null;
  this.callbackBody = callbackBody || null;
  this.returnUrl = returnUrl || null;
  this.returnBody = returnBody || null;
  this.endUser = endUser || null;
  this.expires = expires || 3600;
  this.persistentOps = persistentOps || null;
  this.persistentNotifyUrl = persistentNotifyUrl || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.PutPolicy.prototype" id="apidoc.module.qiniu.rs.PutPolicy.prototype">module qiniu.rs.PutPolicy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy.prototype.getFlags" id="apidoc.element.qiniu.rs.PutPolicy.prototype.getFlags">
        function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy.prototype.</span>getFlags
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFlags = function () {
  var flags = {};
  var attrs = [&#x27;scope&#x27;, &#x27;insertOnly&#x27;, &#x27;saveKey&#x27;, &#x27;endUser&#x27;, &#x27;returnUrl&#x27;, &#x27;returnBody&#x27;, &#x27;callbackUrl&#x27;, &#x27;callbackHost&#x27;, &#x27;callbackBody
&#x27;, &#x27;callbackBodyType&#x27;, &#x27;callbackFetchKey&#x27;, &#x27;persistentOps&#x27;, &#x27;persistentNotifyUrl&#x27;, &#x27;persistentPipeline&#x27;, &#x27;fsizeLimit&#x27;, &#x27;detectMime
&#x27;, &#x27;mimeLimit&#x27;];

  for (var i = attrs.length - 1; i &#x3e;= 0; i--) {
    if (this[attrs[i]] !== null) {
      flags[attrs[i]] = this[attrs[i]];
    }
  }

  flags[&#x27;deadline&#x27;] = this.expires + Math.floor(Date.now() / 1000);

  return flags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
// @endgist

PutPolicy.prototype.token = function(mac) {
  if (mac == null) {
    mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
  }
  var flags = this.<span class="apidocCodeKeywordSpan">getFlags</span>();
  var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
  var encoded = util.hmacSha1(encodedFlags, mac.secretKey);
  var encodedSign = util.base64ToUrlSafe(encoded);
  var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
  return uploadToken;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy.prototype.token" id="apidoc.element.qiniu.rs.PutPolicy.prototype.token">
        function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy.prototype.</span>token
        <span class="apidocSignatureSpan">(mac)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">token = function (mac) {
  if (mac == null) {
    mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
  }
  var flags = this.getFlags();
  var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
  var encoded = util.hmacSha1(encodedFlags, mac.secretKey);
  var encodedSign = util.base64ToUrlSafe(encoded);
  var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
  return uploadToken;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
qiniu.conf.ACCESS_KEY = &#x27;ACCESS_KEY&#x27;;
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

//上传策略 http://developer.qiniu.com/article/developer/security/put-policy.html
// bucket:key 空间名:文件名
var putPolicy = new qiniu.rs.PutPolicy2(new policy(&#x27;bucket:key&#x27;));

var token = putPolicy.<span class="apidocCodeKeywordSpan">token</span>();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
qiniu.io.putFile(token,key,filePath ,null,function(err, ret) {
if (!err) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.PutPolicy2" id="apidoc.module.qiniu.rs.PutPolicy2">module qiniu.rs.PutPolicy2</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy2.PutPolicy2" id="apidoc.element.qiniu.rs.PutPolicy2.PutPolicy2">
        function <span class="apidocSignatureSpan">qiniu.rs.</span>PutPolicy2
        <span class="apidocSignatureSpan">(putPolicyObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PutPolicy2(putPolicyObj) {

  if (typeof putPolicyObj !== &#x27;object&#x27;) {
    return false;
  }

  this.scope = putPolicyObj.scope || null;
  this.expires = putPolicyObj.expires || 3600;
  this.insertOnly = putPolicyObj.insertOnly || null;

  this.saveKey = putPolicyObj.saveKey || null;
  this.endUser = putPolicyObj.endUser || null;

  this.returnUrl = putPolicyObj.returnUrl || null;
  this.returnBody = putPolicyObj.returnBody || null;

  this.callbackUrl = putPolicyObj.callbackUrl || null;
  this.callbackHost = putPolicyObj.callbackHost || null;
  this.callbackBody = putPolicyObj.callbackBody || null;
  this.callbackBodyType = putPolicyObj.callbackBodyType || null;
  this.callbackFetchKey = putPolicyObj.callbackFetchKey || null;

  this.persistentOps = putPolicyObj.persistentOps || null;
  this.persistentNotifyUrl = putPolicyObj.persistentNotifyUrl || null;
  this.persistentPipeline = putPolicyObj.persistentPipeline || null;

  this.fsizeLimit = putPolicyObj.fsizeLimit || null;

  this.fsizeMin = putPolicyObj.fsizeMin || null;

  this.detectMime = putPolicyObj.detectMime || null;

  this.mimeLimit = putPolicyObj.mimeLimit || null;

  this.deleteAfterDays = putPolicyObj.deleteAfterDays || null;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// 初始化ak,sk
qiniu.conf.ACCESS_KEY = &#x27;ACCESS_KEY&#x27;;
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

//上传策略 http://developer.qiniu.com/article/developer/security/put-policy.html
// bucket:key 空间名:文件名
var putPolicy = new qiniu.rs.<span class="apidocCodeKeywordSpan">PutPolicy2</span>(new policy(&#x27;bucket:key&#x27;));

var token = putPolicy.token();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rs.PutPolicy2.prototype" id="apidoc.module.qiniu.rs.PutPolicy2.prototype">module qiniu.rs.PutPolicy2.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy2.prototype.getFlags" id="apidoc.element.qiniu.rs.PutPolicy2.prototype.getFlags">
        function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy2.prototype.</span>getFlags
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFlags = function () {
  var flags = {};
  var attrs = [&#x27;scope&#x27;, &#x27;insertOnly&#x27;, &#x27;saveKey&#x27;, &#x27;endUser&#x27;, &#x27;returnUrl&#x27;, &#x27;returnBody&#x27;, &#x27;callbackUrl&#x27;, &#x27;callbackHost&#x27;, &#x27;callbackBody
&#x27;, &#x27;callbackBodyType&#x27;, &#x27;callbackFetchKey&#x27;, &#x27;persistentOps&#x27;, &#x27;persistentNotifyUrl&#x27;, &#x27;persistentPipeline&#x27;, &#x27;fsizeLimit&#x27;,&#x27;fsizeMin&#x27;, &#x27;
detectMime&#x27;, &#x27;mimeLimit&#x27;, &#x27;deleteAfterDays&#x27;];

  for (var i = attrs.length - 1; i &#x3e;= 0; i--) {
    if (this[attrs[i]] !== null) {
      flags[attrs[i]] = this[attrs[i]];
    }
  }

  flags[&#x27;deadline&#x27;] = this.expires + Math.floor(Date.now() / 1000);

  return flags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
// @endgist

PutPolicy.prototype.token = function(mac) {
  if (mac == null) {
    mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
  }
  var flags = this.<span class="apidocCodeKeywordSpan">getFlags</span>();
  var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
  var encoded = util.hmacSha1(encodedFlags, mac.secretKey);
  var encodedSign = util.base64ToUrlSafe(encoded);
  var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
  return uploadToken;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.rs.PutPolicy2.prototype.token" id="apidoc.element.qiniu.rs.PutPolicy2.prototype.token">
        function <span class="apidocSignatureSpan">qiniu.rs.PutPolicy2.prototype.</span>token
        <span class="apidocSignatureSpan">(mac)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">token = function (mac) {
  if (mac == null) {
    mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
  }
  var flags = this.getFlags();
  var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
  var encoded = util.hmacSha1(encodedFlags, mac.secretKey);
  var encodedSign = util.base64ToUrlSafe(encoded);
  var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
  return uploadToken;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
qiniu.conf.ACCESS_KEY = &#x27;ACCESS_KEY&#x27;;
qiniu.conf.SECRET_KEY = &#x27;SECRET_KEY&#x27;;

//上传策略 http://developer.qiniu.com/article/developer/security/put-policy.html
// bucket:key 空间名:文件名
var putPolicy = new qiniu.rs.PutPolicy2(new policy(&#x27;bucket:key&#x27;));

var token = putPolicy.<span class="apidocCodeKeywordSpan">token</span>();


console.log(token);

//key 上传空间的文件名需要和 putPolicy 中的key 相同
qiniu.io.putFile(token,key,filePath ,null,function(err, ret) {
if (!err) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.rsf" id="apidoc.module.qiniu.rsf">module qiniu.rsf</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.rsf.listPrefix" id="apidoc.element.qiniu.rsf.listPrefix">
        function <span class="apidocSignatureSpan">qiniu.rsf.</span>listPrefix
        <span class="apidocSignatureSpan">(bucket, prefix, marker, limit, delimiter, onret)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listPrefix = function (bucket, prefix, marker, limit, delimiter, onret) {
  var uri = getPrefixUri(bucket, prefix, marker, limit, delimiter);
  var digest = util.generateAccessToken(uri, null);

  rpc.postWithoutForm(uri, digest, onret)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//   }else{
//     console.log(err);
//   }
// });
// bucket, prefix, marker, limit, delimiter, onret


// qiniu.rsf.<span class="apidocCodeKeywordSpan">listPrefix</span>(&#x27;atest&#x27;, &#x27;0&#x27;, null, null, null, function(
rerr, ret,res){

//    if (res.statusCode==200) {
//         //console.log(ret);
//         console.log(ret);
//        // console.log(rerr);
//      } else {
//        //console.log(ret);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.util" id="apidoc.module.qiniu.util">module qiniu.util</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.util.base64ToUrlSafe" id="apidoc.element.qiniu.util.base64ToUrlSafe">
        function <span class="apidocSignatureSpan">qiniu.util.</span>base64ToUrlSafe
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">base64ToUrlSafe = function (v) {
  return v.replace(/\//g, &#x27;_&#x27;).replace(/\+/g, &#x27;-&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PutPolicy.prototype.token = function(mac) {
if (mac == null) {
  mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
}
var flags = this.getFlags();
var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
var encoded = util.hmacSha1(encodedFlags, mac.secretKey);
var encodedSign = util.<span class="apidocCodeKeywordSpan">base64ToUrlSafe</span>(encoded);
var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
return uploadToken;
}

PutPolicy.prototype.getFlags = function() {
var flags = {};
var attrs = [&#x27;scope&#x27;, &#x27;insertOnly&#x27;, &#x27;saveKey&#x27;, &#x27;endUser&#x27;, &#x27;returnUrl&#x27;, &#x27;returnBody
&#x27;, &#x27;callbackUrl&#x27;, &#x27;callbackHost&#x27;, &#x27;callbackBody&#x27;, &#x27;callbackBodyType&#x27;, &#x27;callbackFetchKey
&#x27;, &#x27;persistentOps&#x27;, &#x27;persistentNotifyUrl&#x27;, &#x27;persistentPipeline&#x27;, &#x27;fsizeLimit&#x27;, &#x27
;detectMime&#x27;, &#x27;mimeLimit&#x27;];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.util.generateAccessToken" id="apidoc.element.qiniu.util.generateAccessToken">
        function <span class="apidocSignatureSpan">qiniu.util.</span>generateAccessToken
        <span class="apidocSignatureSpan">(uri, body)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generateAccessToken = function (uri, body) {
  var u = url.parse(uri);
  var path = u.path;
  var access = path + &#x27;\n&#x27;;

  if (body) {
    access += body;
  }

  var digest = exports.hmacSha1(access, conf.SECRET_KEY);
  var safeDigest = exports.base64ToUrlSafe(digest);
  return &#x27;QBox &#x27; + conf.ACCESS_KEY + &#x27;:&#x27; + safeDigest;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  if (opts.pipeline) {
    param.pipeline = opts.pipeline;
  }

  var uri = conf.API_HOST + &#x27;/pfop/&#x27;;
  var body = querystring.stringify(param);
  var auth = util.<span class="apidocCodeKeywordSpan">generateAccessToken</span>(uri, body);
  rpc.postWithForm(uri, body, auth, onret);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.util.hmacSha1" id="apidoc.element.qiniu.util.hmacSha1">
        function <span class="apidocSignatureSpan">qiniu.util.</span>hmacSha1
        <span class="apidocSignatureSpan">(encodedFlags, secretKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hmacSha1 = function (encodedFlags, secretKey) {
<span class="apidocCodeCommentSpan">  /*
   *return value already encoded with base64
  * */
</span>  var hmac = crypto.createHmac(&#x27;sha1&#x27;, secretKey);
  hmac.update(encodedFlags);
  return hmac.digest(&#x27;base64&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

PutPolicy.prototype.token = function(mac) {
if (mac == null) {
  mac = new Mac(conf.ACCESS_KEY, conf.SECRET_KEY);
}
var flags = this.getFlags();
var encodedFlags = util.urlsafeBase64Encode(JSON.stringify(flags));
var encoded = util.<span class="apidocCodeKeywordSpan">hmacSha1</span>(encodedFlags, mac.secretKey);
var encodedSign = util.base64ToUrlSafe(encoded);
var uploadToken = mac.accessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedFlags;
return uploadToken;
}

PutPolicy.prototype.getFlags = function() {
var flags = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.util.isQiniuCallback" id="apidoc.element.qiniu.util.isQiniuCallback">
        function <span class="apidocSignatureSpan">qiniu.util.</span>isQiniuCallback
        <span class="apidocSignatureSpan">(path, body, callbackAuth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isQiniuCallback(path, body, callbackAuth) {
  var auth = exports.generateAccessToken(path, body);
  return auth === callbackAuth;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.qiniu.util.urlsafeBase64Encode" id="apidoc.element.qiniu.util.urlsafeBase64Encode">
        function <span class="apidocSignatureSpan">qiniu.util.</span>urlsafeBase64Encode
        <span class="apidocSignatureSpan">(jsonFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">urlsafeBase64Encode = function (jsonFlags) {
  var encoded = new Buffer(jsonFlags).toString(&#x27;base64&#x27;);
  return exports.base64ToUrlSafe(encoded);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var digest = util.generateAccessToken(uri, null);
  rpc.postWithoutForm(uri, digest, onret);
}


Client.prototype.fetch = function(url, bucket, key, onret) {
var bucketUri = getEncodedEntryUri(bucket, key);
var fetchUrl = util.<span class="apidocCodeKeywordSpan">urlsafeBase64Encode</span>(url);
var uri = &#x27;http://iovip.qbox.me/fetch/&#x27; + fetchUrl + &#x27;/to/&#x27; + bucketUri;
var digest = util.generateAccessToken(uri, null);
rpc.postWithoutForm(uri, digest, onret);
}

function Entry(hash, fsize, putTime, mimeType, endUser) {
this.hash = hash || null;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.qiniu.zone" id="apidoc.module.qiniu.zone">module qiniu.zone</a></h1>


    <h2>
        <a href="#apidoc.element.qiniu.zone.up_host" id="apidoc.element.qiniu.zone.up_host">
        function <span class="apidocSignatureSpan">qiniu.zone.</span>up_host
        <span class="apidocSignatureSpan">(uptoken, conf)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">up_host = function (uptoken, conf){

    var version = process.versions;
    var num = version.node.split(&#x22;.&#x22;)[0];

    // node 版本号低于 1.0.0, 使用默认域名上传，可以在conf中指定上传域名
    if(num &#x3c; 1 ){
        conf.AUTOZONE = false;
    }

    if(!conf.AUTOZONE){
        return;
    }

    var ak = uptoken.toString().split(&#x22;:&#x22;)[0];
    var tokenPolicy = uptoken.toString().split(&#x22;:&#x22;)[2];
    var tokenPolicyStr = new Buffer(tokenPolicy, &#x27;base64&#x27;).toString();
    var json_tokenPolicyStr = JSON.parse(tokenPolicyStr);

    var scope = json_tokenPolicyStr.scope;
    var bucket = scope.toString().split(&#x22;:&#x22;)[0];

    // bucket 相同，上传域名仍在过期时间内
    if((new Date().getTime() &#x3c; conf.EXPIRE) &#x26;&#x26; bucket == conf.BUCKET){
        return;
    }

    //记录bucket名
    conf.BUCKET = bucket;

    var res = request(&#x27;GET&#x27;, &#x27;http://uc.qbox.me/v1/query?ak=&#x27; + ak + &#x27;&#x26;bucket=&#x27; + bucket, {
      &#x27;headers&#x27;: {
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
      }
    });

    if(res.statusCode == 200){

        var json_str = JSON.parse(res.body.toString());

        //判断设置使用的协议, 默认使用http
        if(conf.SCHEME == &#x27;http&#x27;){
            conf.UP_HOST = json_str.http.up[1];
        }else{
            conf.UP_HOST = json_str.https.up[0];
        }

        conf.EXPIRE = 86400 + new Date().getTime();

    }else{
        var err = new Error(&#x27;Server responded with status code &#x27; + res.statusCode + &#x27;:\n&#x27; + res.body.toString());
        err.statusCode = res.statusCode;
        err.headers = res.headers;
        err.body = res.body;
        throw err;
    }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

rs.on(&#x22;error&#x22;, function (err) {
    onret({code: -1, error: err.toString()}, {});
});

var form = getMultipart(uptoken, key, rs, extra);
// 设置上传域名
zone.<span class="apidocCodeKeywordSpan">up_host</span>(uptoken, conf);

return rpc.postMultipart(conf.UP_HOST, form, onret);
}


function put(uptoken, key, body, extra, onret) {
var rs = new Readable();
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
